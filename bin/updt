#!/bin/bash
#
# Update packages.
#
# Usage:
#
#   $ updt [apt|npm|gem]...
#
# Notes:
#   - `updt` may either be used with no arguments (all updates) or with
#   group of arguments that represent specific updates.
#
# Example:
#
#   $ updt apt gem
#

set -e

updt_apt() {
  if [ $(which apt) ]
  then
    sudo apt update && sudo apt full-upgrade -y
  fi
}

updt_npm() {
  if [ $(which npm) ]
  then
    sudo npm update -g
  fi
}

updt_gem() {
  if [ $(which gem) ]
  then
    rvmsudo gem update
  fi
}

if [ -z "$1" ]
then
  updt_apt && updt_npm && updt_gem
else
  for i in $@
  do
    case "$i" in
      apt)
        updt_apt
        ;;
      npm)
        updt_npm
        ;;
      gem)
        updt_gem
    esac
  done
fi

# Remove temporary update files
sudo rm -rf ~/tmp
