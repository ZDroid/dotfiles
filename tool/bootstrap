#!/bin/bash
#
# Bootstrap dotfiles.
#
# `config()` is taken from the holman/dotfiles repository.
#
# Usage:
#
#   tool/bootstrap [copy|config]
#

function copy {
  if [ ${#2} = 0 ]
  then
    src=*/.[^.]*
  else
    src=$2/.[^.]*
  fi

  for dot in $src
  do
    cp $dot ~/ 2> /dev/null
  done
}

function config {
  printf "\033[1mWhat is your GitHub author name?\033[0m\n"
  read -e git_name
  printf "\033[1mWhat is your GitHub author e-mail?\033[0m\n"
  read -e git_email
  sed -e "s/NAME/$git_name/g" -e "s/EMAIL/$git_email/g" \
  git/gitconfig.template > ~/.gitconfig
}

case "$1" in
  "")
    copy && config
    ;;
  copy)
    copy
    ;;
  config)
    config
esac